{
  "version": 3,
  "sources": ["../../../../../src/client/views/pages/sign-in-page.ts"],
  "sourcesContent": ["import { Page } from 'router/src/data/page.ts';\n\nimport { View } from '../view.ts';\n\nimport { AuthServiceComponent } from '../components/auth-service-component.ts';\n\nimport { loadContent, navigateHandler, mount, unmount } from '../../utils.ts';\n\nimport { context } from '../../globals.ts';\n\nimport { DEFAULT_LANGUAGE } from '../../../globals.ts';\n\nexport class SignInPage implements View {\n  protected static page: SignInPage | null = null;\n\n  protected node: HTMLElement | null = null;\n\n  protected titleElem: HTMLElement | null = null;\n\n  protected passwordLabelElem: HTMLElement | null = null;\n\n  protected signUpBtn: HTMLElement | null = null;\n  protected signInBtn: HTMLElement | null = null;\n  protected cancelBtn: HTMLElement | null = null;\n\n  protected authService: AuthServiceComponent | null = null;\n\n  protected signUpBtnClickHandler: (event: MouseEvent) => void;\n  protected cancelBtnClickHandler: (event: MouseEvent) => void;\n\n  protected formSubmitHandler: (event: SubmitEvent) => void;\n\n  static get instance(): SignInPage {\n    if(!SignInPage.page) {\n      SignInPage.page = new SignInPage();\n    }\n\n    return SignInPage.page;\n  }\n\n  constructor() {\n    this.formSubmitHandler = event => {\n      event.preventDefault();\n\n      const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\n      const data = new FormData(form as HTMLFormElement);\n\n      console.log('Form submited: ');  \n      \n      data.forEach((value, key) => {\n        console.log(key + ':', value);          \n      });    \n    };\n\n    this.signUpBtnClickHandler = event => navigateHandler(event, this.signUpBtn as HTMLElement);\n    this.cancelBtnClickHandler = event => navigateHandler(event, this.cancelBtn as HTMLElement);\n  }\n\n  get elem(): HTMLElement | null {\n    return this.node;\n  }\n\n  async init(parent: HTMLElement | null, firstTime: boolean) {\n    let content = await loadContent(parent, firstTime, []);    \n\n    this.node = content.querySelector('[data-page=\"signin-page\"]') || null;    \n\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\n\n    this.titleElem = this.node?.querySelector('[data-title=\"main\"]') || null;\n\n    this.passwordLabelElem = form?.querySelector('#password-label') || null;\n\n    this.signUpBtn = form?.querySelector('[data-button=\"sign-up\"]') || null;\n    this.signInBtn = form?.querySelector('[data-button=\"sign-in\"]') || null;\n    this.cancelBtn = form?.querySelector('[data-button=\"cancel\"]') || null;    \n\n    this.authService = new AuthServiceComponent();\n    await this.authService.init(this, firstTime);\n    \n    return content;\n  }\n\n  async mount() {\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\n\n    form?.addEventListener('submit', this.formSubmitHandler);\n    this.signUpBtn?.addEventListener('click', this.signUpBtnClickHandler);\n    this.cancelBtn?.addEventListener('click', this.cancelBtnClickHandler);\n\n    await mount(this.node);\n  }\n\n  async unmount() {\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\n\n    form?.removeEventListener('submit', this.formSubmitHandler);\n    this.signUpBtn?.removeEventListener('click', this.signUpBtnClickHandler);\n    this.cancelBtn?.removeEventListener('click', this.cancelBtnClickHandler);\n\n    await unmount(this.node);\n  }\n\n  async load(lang: string , page: Page, firstLoad: boolean): Promise<void> {\n    if(this.titleElem) {\n      this.titleElem.textContent = context.tr('Sign In');\n    }\n\n    if(this.passwordLabelElem) {\n      this.passwordLabelElem.textContent = context.tr('Password');\n    }\n\n    if(this.signUpBtn) {\n      this.signUpBtn.textContent = context.tr('Sign Up');\n    }\n\n    if(this.signInBtn) {\n      this.signInBtn.textContent = context.tr('Sign In');\n    }\n\n    if(this.cancelBtn) {\n      this.cancelBtn.textContent = context.tr('Cancel');\n    }\n\n    this.signUpBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/sign-up');\n    this.cancelBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/');\n\n    await this.authService?.load?.(lang, page, firstLoad);\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAYO,wBAAiC;AAAA,EAG5B,OAA2B;AAAA,EAE3B,YAAgC;AAAA,EAEhC,oBAAwC;AAAA,EAExC,YAAgC;AAAA,EAChC,YAAgC;AAAA,EAChC,YAAgC;AAAA,EAEhC,cAA2C;AAAA,EAE3C;AAAA,EACA;AAAA,EAEA;AAAA,aAEC,WAAuB;AAChC,QAAG,CAAC,YAAW,MAAM;AACnB,kBAAW,OAAO,IAAI;AAAA;AAGxB,WAAO,YAAW;AAAA;AAAA,EAGpB,cAAc;AACZ,SAAK,oBAAoB,WAAS;AAChC,YAAM;AAEN,YAAM,OAAO,KAAK,MAAM,cAAc;AACtC,YAAM,OAAO,IAAI,SAAS;AAE1B,cAAQ,IAAI;AAEZ,WAAK,QAAQ,CAAC,OAAO,QAAQ;AAC3B,gBAAQ,IAAI,MAAM,KAAK;AAAA;AAAA;AAI3B,SAAK,wBAAwB,WAAS,gBAAgB,OAAO,KAAK;AAClE,SAAK,wBAAwB,WAAS,gBAAgB,OAAO,KAAK;AAAA;AAAA,MAGhE,OAA2B;AAC7B,WAAO,KAAK;AAAA;AAAA,QAGR,KAAK,QAA4B,WAAoB;AACzD,QAAI,UAAU,MAAM,YAAY,QAAQ,WAAW;AAEnD,SAAK,OAAO,QAAQ,cAAc,gCAAgC;AAElE,UAAM,OAAO,KAAK,MAAM,cAAc;AAEtC,SAAK,YAAY,KAAK,MAAM,cAAc,0BAA0B;AAEpE,SAAK,oBAAoB,MAAM,cAAc,sBAAsB;AAEnE,SAAK,YAAY,MAAM,cAAc,8BAA8B;AACnE,SAAK,YAAY,MAAM,cAAc,8BAA8B;AACnE,SAAK,YAAY,MAAM,cAAc,6BAA6B;AAElE,SAAK,cAAc,IAAI;AACvB,UAAM,KAAK,YAAY,KAAK,MAAM;AAElC,WAAO;AAAA;AAAA,QAGH,QAAQ;AACZ,UAAM,OAAO,KAAK,MAAM,cAAc;AAEtC,UAAM,iBAAiB,UAAU,KAAK;AACtC,SAAK,WAAW,iBAAiB,SAAS,KAAK;AAC/C,SAAK,WAAW,iBAAiB,SAAS,KAAK;AAE/C,UAAM,MAAM,KAAK;AAAA;AAAA,QAGb,UAAU;AACd,UAAM,OAAO,KAAK,MAAM,cAAc;AAEtC,UAAM,oBAAoB,UAAU,KAAK;AACzC,SAAK,WAAW,oBAAoB,SAAS,KAAK;AAClD,SAAK,WAAW,oBAAoB,SAAS,KAAK;AAElD,UAAM,QAAQ,KAAK;AAAA;AAAA,QAGf,KAAK,MAAe,MAAY,WAAmC;AACvE,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,QAAG,KAAK,mBAAmB;AACzB,WAAK,kBAAkB,cAAc,QAAQ,GAAG;AAAA;AAGlD,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,SAAK,WAAW,aAAa,QAAS,UAAS,mBAAmB,KAAK,IAAI,UAAU;AACrF,SAAK,WAAW,aAAa,QAAS,UAAS,mBAAmB,KAAK,IAAI,UAAU;AAErF,UAAM,KAAK,aAAa,OAAO,MAAM,MAAM;AAAA;AAAA;AAnHxC;AACY,cADZ,YACY,QAA0B;",
  "names": []
}
