var h="/",S={kz:{image:"/images/flags/kz.svg",label:"\u049A\u0430\u0437\u0430\u049B\u0448\u0430"},ru:{image:"/images/flags/ru.svg",label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},en:{image:"/images/flags/en.svg",label:"English"}},T="kz";function u(i){return i.replace(/\/$/,"").replace(/^\//,"")}function p(i,t,e){let s=i.trim().split("?"),r=s[0].trim(),n=s[1]?.trim();return r?(e!=="/"&&(r=r.replace(e,"")),r=u(r)):r=t,n?`${r}?${n}`:r}function d(i){let t={},e=i;return i[0]==="?"&&(e=i.substring(1)),e.split("&").forEach(o=>{let s=o.split("=");if(s[0]!==""){let r=decodeURIComponent(s[0]),n=s[1]===void 0?"1":s[1];t[r]=n}}),t}function c(i){if(typeof i=="string"){let e=u(i).replace(/([\\\/\-\_\.])/g,"\\$1").replace(/\{[a-zA-Z]+\}/g,"(:any)").replace(/\:any/g,"[\\w\\-\\_\\.]+").replace(/\:word/g,"[a-zA-Z]+").replace(/\:num/g,"\\d+");return new RegExp(`^${e}$`,"i")}return i}var g=class{routes=[];root="/";constructor(t){this.before=t?.before,this.page404=t?.page404,t?.root&&(this.root=t.root==="/"?"/":`/${u(t.root)}/`),t?.routes&&this.addRoutes(t.routes)}get rootPath(){return this.root}addRoutes(t){for(let e of t)this.add(e.rule,e.handler,e.options)}add(t,e,o){return this.routes.push({rule:c(t),handler:e,options:o}),this}remove(t){return this.routes.some((e,o)=>e.handler===t||e.rule===c(t)?(this.routes.splice(o,1),!0):!1),this}findRoute(t){for(let e of this.routes){let o=t.match(e.rule);if(o)return{match:o,route:e}}}async processUrl(t,e,o){if(!await this.before?.({fragment:t,query:e,state:o})){let r=this.findRoute(t);if(!r)await this.page404?.({fragment:t,query:e,state:o});else{r.match.shift();let n={fragment:t,query:e,match:r.match,options:r.route.options,state:o};await r.route.handler?.(n)}}}};var f=class{constructor(t){this.router=t;this.popStateHandler=()=>{t.processUrl(this.fragment,this.query,history.state)}}popStateHandler;get fragment(){let t=decodeURI(location.pathname);return this.router.rootPath!=="/"&&(t=t.replace(this.router.rootPath,"")),u(t)}get query(){return d(location.search)}async redirectTo(t,e){let o=p(t,this.fragment,this.router.rootPath);history.replaceState(e,"",this.router.rootPath+o);let s=this.fragment,r=this.query;await this.router.processUrl(s,r,e)}async navigateTo(t,e){let o=p(t,this.fragment,this.router.rootPath);history.pushState(e,"",this.router.rootPath+o);let s=this.fragment,r=this.query;await this.router.processUrl(s,r,e)}refresh(){return this.redirectTo(this.fragment+location.search,history.state)}addUriListener(){window.addEventListener("popstate",this.popStateHandler)}removeUriListener(){window.removeEventListener("popstate",this.popStateHandler)}};function m(i){let t=typeof i;return t==="function"||t==="object"&&!!i}var l=class{data;globalContext;extension;constructor(){this.resetContext()}static create(t){let e=new l;return e.add(t),e}translate(t,e,o,s){let r,n,a=this.globalContext;return m(e)?(n=e,m(o)&&(a=o)):typeof e=="number"?(r=e,n=o,s&&(a=s)):typeof o=="number"?(r=o,n=s):(n=o,s&&(a=s)),this.translateText(t,r,n,a)}add(t){if(!this.data)this.data=t;else{if(t.values&&this.data.values)for(let e of Object.keys(t.values))this.data.values[e]=t.values[e];if(t.contexts&&this.data.contexts)for(let e of t.contexts)this.data.contexts.push(e)}}setContext(t,e){this.globalContext[t]=e}extend(t){this.extension=t}clearContext(t){delete this.globalContext[t]}reset(){this.resetData(),this.resetContext()}resetData(){this.data={values:{},contexts:[]}}resetContext(){this.globalContext={}}translateText(t,e,o,s){if(s=s||this.globalContext,!this.data)return this.useOriginalText(""+t,e,o);let r=this.getContextData(this.data,s),n=null;return r&&(n=this.findTranslation(t,e,o,r?.values)),n===null&&(n=this.findTranslation(t,e,o,this.data.values)),n===null&&(n=this.useOriginalText(""+t,e,o)),n}findTranslation(t,e,o,s){let r=s?.[t];if(r===void 0)return null;if(typeof r=="object"&&!Array.isArray(r))return this.extension?(r=""+this.extension(t,e,o,r),r=this.applyNumbers(r,e||0),this.applyFormatting(r,o)):this.useOriginalText(""+t,e,o);if(e===void 0&&typeof r=="string")return this.applyFormatting(r,o);if(r instanceof Array){for(let n of r)if(e===void 0&&n[0]===null&&n[1]===null||e!==void 0&&(n[0]!==null&&e>=n[0]&&(n[1]===null||e<=n[1])||n[0]===null&&n[1]&&e<=n[1])){let a=e||0,v=""+(n[2]??""),w=this.applyNumbers(v,a);return this.applyFormatting(w,o)}}return null}applyNumbers(t,e){return t=t.replace("-%n",""+-e),t=t.replace("%n",""+e),t}applyFormatting(t,e){if(e)for(let o of Object.keys(e)){let s=new RegExp(`%{${o}}`,"g");t=t.replace(s,e[o])}return t}getContextData(t,e){if(!t.contexts)return null;for(let o of t.contexts){let s=!0;for(let r of Object.keys(o.matches)){let n=o.matches[r];s=s&&n===e[r]}if(s)return o}return null}useOriginalText(t,e,o){return e===void 0?this.applyFormatting(t,o):this.applyFormatting(t.replace("%n",""+e),o)}};var C=new g({root:h}),x=new f(C),$={},y={},q={},R=new l,M={tr:R.translate.bind(R)};async function b(i){return new Promise(t=>setTimeout(t,i))}async function B(i,t){i.preventDefault();let e=t.getAttribute?.("href");e&&await x.navigateTo(e)}async function _(i,t,e){let o;if(t||i)o=i||document.body;else{let s=location.pathname+"?ajax=1&init=1&time="+Date.now(),r=[];for(let a of e)a in y||r.push(a);r.length>0&&(s+="&layouts="+r.join(","));let n=await(await fetch(s)).text();o=document.createElement("div"),o.innerHTML=n}return o}async function I(i){i&&(await b(10),i.classList.remove("page-unmount"))}async function Q(i){i&&(i.classList.add("page-unmount"),await b(250))}export{l as a,u as b,S as c,T as d,C as e,x as f,$ as g,y as h,q as i,M as j,B as k,_ as l,I as m,Q as n};
