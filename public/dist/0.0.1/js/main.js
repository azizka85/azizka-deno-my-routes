import{a as $,c as y,d as E}from"./chunk-VXMPBQQE.js";import{a as R,d as w,e as b,f as h,g as u,h as s,i as m,j as d}from"./chunk-VFBTEIBW.js";import{a as L}from"./chunk-YJ2DKIZS.js";var p=class{node=null;static get instance(){return p.page||(p.page=new p),p.page}get elem(){return this.node}async init(t,o){let n=t||document.body;return this.node=n.querySelector('[data-page="loader-page"]'),n}},c=p;L(c,"page",null);var f=class extends ${static get instance(){return f.layout||(f.layout=new f),f.layout}},g=f;L(g,"layout",null);function P(){document.querySelector(".splash")?.classList.remove("splash-open")}function D(e){let t=g.instance;for(let o of e)if(o in s){t=s[o];break}return t}async function M(e,t,o){let n={};for(let a of e)if(!(a in s)){let i=await import(`./views/layouts/${a}.js?time=${Date.now()}`);t=await i[y(a)]?.instance?.init?.(t,o),s[a]=i[y(a)]?.instance,n[a]=!0}return n}async function S(e,t,o,n){let a=[...o].reverse(),i=g.instance;for(let l of a)i.content!==s[l]&&await i.replaceContent(s[l]),await s[l].load?.(e,t,n[l]??!1),i=s[l];return i}async function x(e,t,o,n,a){d.page=t;let i=null,l=!1;if(!a&&(!(e in m)||!(o in u))){let r=D(n);r.content!==c.instance&&await r.replaceContent(c.instance)}if(!(e in m)){let r=await import(`./locales/${e}.js?time=${Date.now()}`);m[e]=R.create(r.default)}if(d.tr=m[e].translate.bind(m[e]),document.documentElement.lang=e,document.title=d.tr("My Routes"),!(o in u)){let r=await import(`./views/${o}.js?time=${Date.now()}`);i=await r[y(o)]?.instance?.init?.(i,a),u[o]=r[y(o)]?.instance,l=!0}let v=await M(n,i,a);if(d.page.fragment===t.fragment){let r=await S(e,t,n,v);r.content!==u[o]&&await r.replaceContent(u[o]),await u[o].load?.(e,t,l)}a&&P()}window.addEventListener("DOMContentLoaded",()=>{let e=!0;c.instance.init(null,e),b.addRoutes([{rule:`${E}/?`,async handler(t){await x(t.match?.[0]||w,t,"home-page",["main-layout"],e)}},{rule:`${E}/?sign-in`,async handler(t){await x(t.match?.[0]||w,t,"sign-in-page",[],e)}},{rule:`${E}/?sign-up`,async handler(t){await x(t.match?.[0]||w,t,"sign-up-page",[],e)}}]),h.addUriListener(),b.processUrl(h.fragment,h.query).catch(t=>console.error(t)).finally(()=>e=!1)});
